(()=>{class e{set_user_data(e){let s={email:e.email,displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,emailVerified:e.emailVerified};return e.emailVerified,s}set_session_storage(e){sessionStorage.setItem("primenotes-user-data",JSON.stringify(e))}on_auth_state_change(){let e=this;firebase.auth().onAuthStateChanged((function(s){if(null!=s){let i=e.set_user_data(s);e.set_session_storage(i)}}))}login(){var e={privacyPolicyUrl:"<your-privacy-policy-url>",signInSuccessUrl:"../index.html",signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID],tosUrl:"../"};return new firebaseui.auth.AuthUI(firebase.auth()).start("#firebaseui-auth-container",e)}login_with_email_and_password(e,s){let i=this;i.switch_loader(),this.firebase.auth().signInWithEmailAndPassword(e,s).then((e=>{i.switch_loader();let s=i.set_user_data(e);i.set_session_storage(s),window.location.replace("../index.html")})).catch((e=>{i.switch_loader(),$("#sign-in-warning").html("<p>"+e.message+"</p>"),e.code,e.message}))}create_account(){let e=$("#sign-up-email").val(),s=$("#sign-up-password").val();this.firebase.auth().createUserWithEmailAndPassword(e,s).then((e=>{e.user,this.send_verfication()})).catch((e=>{$("#sign-up-warning").html("<p>"+e.message+"</p>")}))}send_verfication(e){let s=this,i=this.firebase.auth();s.switch_loader(),i.currentUser.sendEmailVerification({url:"https://primenotes-17aa2.firebaseapp.com/templates/login-2.html",handleCodeInApp:!1}).then((()=>{s.switch_loader(),console.log("verification email sent"),$("#sign-up-warning").html("<p>"+s.verification_email_sent+"</p>"),$("#sign-in-email").val(),e&&(window.location.href="../")})).catch((e=>{s.switch_loader(),e.code,e.message,$("#sign-up-warning").html("<p>"+e.message+"</p>")}))}logout(){firebase.auth().signOut().then((function(){console.log("success"),window.location.replace("../index.html")}),(function(){}))}switch_loader(){$("#loader").toggleClass("active")}hide_loader(){$("#loader").toggleClass("active")}init(){let e=this;e.reset_password_sent_message="Email sent, kindly visit your email inbox",e.verification_email_sent="Verification email sent, please check your email inbox",e.firebase_config={apiKey:"AIzaSyApJRgVPBvyx7VQOcGdPPm_5NlgKVJEtX0",authDomain:"primenotes-17aa2.firebaseapp.com",databaseURL:"https://primenotes-17aa2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"primenotes-17aa2",storageBucket:"primenotes-17aa2.appspot.com",messagingSenderId:"769006089587",appId:"1:769006089587:web:90c4b0595e89dd195f8106",measurementId:"G-WDC2R9TFPX"},firebase.initializeApp(e.firebase_config),this.firebase=firebase,this.on_auth_state_change(),this.login(),$("#sign-up-button").on("click",(()=>{""===$("#sign-up-reenter-password").val()?$("#sign-up-warning").html("<p>confirm password field is empty</p>"):e.create_account()})),$("#sign-in-button").on("click",(()=>{let s=$("#sign-in-email").val(),i=$("#sign-in-password").val();e.login_with_email_and_password(s,i)})),$("#sign-in-switch").on("click",(()=>{$(".sign-in-section").show(),$(".sign-up-section").hide(),$(".reset-password-section").hide()})),$("#sign-up-switch").on("click",(()=>{$(".sign-in-section").hide(),$(".sign-up-section").show(),$(".reset-password-section").hide()})),$("#sign-up-reenter-password").on("keyup",(()=>{let e=$("#sign-up-reenter-password").val();e!==$("#sign-up-password").val()&&""!==e?$("#sign-up-warning").html("<p>password and confirm password are not same</p>"):$("#sign-up-warning").html("<p></p>")})),$("#reset-password").on("click",(()=>{$(".sign-in-section").hide(),$(".sign-up-section").hide(),$(".reset-password-section").show(),console.log("password reset clicked")})),$("#reset-password-button").on("click",(()=>{let s=$("#reset-password-email").val();console.log(s),e.switch_loader(),e.firebase.auth().sendPasswordResetEmail(s).then((s=>{e.switch_loader(),$("#reset-password-warning").html("<p>"+e.reset_password_sent_message+"</p>"),console.log(s)})).catch((s=>{e.switch_loader(),$("#reset-password-warning").html("<p>"+s.message+"</p>"),console.log(s.code),console.log(s.message)}))}))}}$(document).ready((function(){(new e).init()}))})();